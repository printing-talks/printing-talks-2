---
import { getCollection } from "astro:content";
import BaseLayout from "../layouts/BaseLayout.astro";
import Grid from "../components/Grid.astro";
import Hero from "../components/Hero.astro";
import PortfolioPreview from "../components/PortfolioPreview.astro";

// Content Fetching: List four most recent work projects
const products = (await getCollection("products"))
	.sort((a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf())
	.slice(0, 4);
---

<BaseLayout>
	<header>
		<Hero
			title="Printing Talks"
			tagline="Custom packaging that leaves an impact"
		/>
	</header>
	<main>
		<main class="wrapper stack gap-20 lg:gap-48">
			<section class="section with-background with-cta">
				<header class="section-header stack gap-2 lg:gap-4">
					<h3>Selected Work</h3>
					<p>
						Take a look below at some of my featured work for clients from the
						past few years.
					</p>
				</header>

				<div class="gallery">
					<Grid variant="offset">
						{
							products.map((product) => (
								<li>
									<PortfolioPreview product={product} />
								</li>
							))
						}
					</Grid>
				</div>
			</section>
		</main>
	</main>

	<style></style>
</BaseLayout>
